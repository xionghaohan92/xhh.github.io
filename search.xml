<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[奇怪的循环变量]]></title>
    <url>%2F2018%2F11%2F01%2F%E5%A5%87%E6%80%AA%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%8F%98%E9%87%8F%2F</url>
    <content type="text"><![CDATA[问题描述有问题如下：12345678910&lt;?php$arr = [1,2,3];foreach ($arr as &amp;$v)&#123;&#125;foreach ($arr as $v)&#123; &#125;print_r($arr); 结果输出了：123456Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 2) 分析这里的v在第一次循环结束时并没有释放，循环结束后v依然指向arr的最后一个元素，而不是第一个元素。且由于是引用赋值，改变v的值是可以影响arr数组的，为之后的”bug”埋下了伏笔。换句话说，代码等价于:12345678910&lt;?php$arr = [1,2,3];foreach ($arr as &amp;$v)&#123;&#125;foreach ($arr as &amp;$v)&#123; &#125;print_r($arr); 第二次循环开始了，循环时会依次把遍历中的数组元素赋给v,注意这里v依然指向数组的最后一个元素，三次赋值的结果如下： $v&lt;-1,arr开始为[1,2,3]，赋值后arr为[1,2,1] $v&lt;-2,arr开始为[1,2,1]，赋值后arr为[1,2,2] $v&lt;-2,arr开始为[1,2,2]，赋值后arr为[1,2,2] 根本原因php中没有把循环看作一个独立的空间，在循环过程中新声明的变量就是全局变量，循环结束后变量并没有被释放。]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>技术</tag>
      </tags>
  </entry>
</search>
